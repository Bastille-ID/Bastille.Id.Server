@using Bastille.Id.Models
@model Bastille.Id.Server.Core.Security.Models.DeleteUserProfileModel
@{
    ViewData["Title"] = Resources.UserDeleteAccount;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-10">
                <div class="alert alert-warning">
                    <strong>@Resources.WarningText</strong> @Resources.DeleteAccountWarningText
                </div>
                <div class="card">
                    <div class="card-body">
                        <form asp-action="DeleteConfirmed" asp-controller="Account" method="post">

                            @if (Model.Groups.Any())
                            {
                                <div class="row">
                                    <div class="col-md-10">
                                        <h4 class="card-title">@Resources.OrganizationsText</h4>
                                        <div class="card-description">@Resources.DeleteAccountConfirmOrganizations</div>
                                        <div class="card-body">
                                            @foreach (var item in Model.Groups)
                                            {
                                                <div class="row">
                                                    <div class="col-md-10" style="height:25px;">
                                                        <div class="form-group">
                                                            <label><input type="checkbox" required /> @item.Name</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            }

                            <br />
                            <div class="form-group">
                                <label style="font-weight: bold;"><input type="checkbox" required /> @Resources.DeleteAccountConfirmation</label>
                                <br />
                                <input type="submit" id="deleteButton" class="btn btn-fill btn-danger cursor-pointer" disabled="disabled" value="@Resources.DeleteAccountText">
                                <button onclick="history.go(-1); return false;" class="btn btn-info cursor-pointer">@Resources.BackToSettingsText</button>
                            </div>
                            <div class="clearfix"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts {
    <script type="text/javascript">
        var checkboxes = $("input[type='checkbox']"),
            submittalButton = $("input[type='submit']");

        // disable submittal until all checkboxes have been checked.
        checkboxes.click(function () {
            submittalButton.attr("disabled", checkboxes.not(':checked').length > 0);
        });

        notifyPrompt("@Html.Raw(Model.StatusMessage)", "@Model.StatusType", @(Model.StatusType == StatusMessageResultType.Success));
    </script>
}